{% extends "mobile/base.html" %}

{% block title %}Notes - AnchorOS{% endblock %}
{% block page_title %}Notes{% endblock %}

{% block header_actions %}
<a href="{{ url_for('mobile.note_new') }}" class="quick-action text-sm">
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
    </svg>
    Add
</a>
{% endblock %}

{% block content %}
{% if pinned_notes or unpinned_notes %}
    {% if pinned_notes %}
    <div class="mb-4">
        <div class="text-xs text-medium uppercase tracking-wide mb-2 flex items-center gap-1">
            <svg class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                <path d="M5 5a2 2 0 012-2h6a2 2 0 012 2v2H5V5z"/>
                <path fill-rule="evenodd" d="M3 7h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V7zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd"/>
            </svg>
            Pinned
        </div>
        {% for note in pinned_notes %}
        <a href="{{ url_for('mobile.note_detail', note_id=note.id) }}" class="mobile-card block border-l-2 border-yellow-400">
            <div class="flex items-start justify-between mb-2">
                <h3 class="text-high font-medium flex-1">{{ note.title or 'Untitled' }}</h3>
                <span class="text-xs text-low">{% if note.updated_at and note.updated_at.strftime %}{{ note.updated_at.strftime('%d %b') }}{% else %}Recent{% endif %}</span>
            </div>
            <p class="text-sm text-medium line-clamp-2">{{ note.content[:100] }}{% if note.content|length > 100 %}...{% endif %}</p>
            {% if note.tags %}
            <span class="pill text-xs bg-white/10 text-medium mt-2 inline-block">{{ note.tags.split(',')[0] }}</span>
            {% endif %}
        </a>
        {% endfor %}
    </div>
    {% endif %}

    {% if unpinned_notes %}
    {% if pinned_notes %}
    <div class="text-xs text-medium uppercase tracking-wide mb-2">All Notes</div>
    {% endif %}
    {% for note in unpinned_notes %}
    <a href="{{ url_for('mobile.note_detail', note_id=note.id) }}" class="mobile-card block">
        <div class="flex items-start justify-between mb-2">
            <h3 class="text-high font-medium flex-1">{{ note.title or 'Untitled' }}</h3>
            <span class="text-xs text-low">{% if note.updated_at and note.updated_at.strftime %}{{ note.updated_at.strftime('%d %b') }}{% else %}Recent{% endif %}</span>
        </div>
        <p class="text-sm text-medium line-clamp-2">{{ note.content[:100] }}{% if note.content|length > 100 %}...{% endif %}</p>
        {% if note.tags %}
        <span class="pill text-xs bg-white/10 text-medium mt-2 inline-block">{{ note.tags.split(',')[0] }}</span>
        {% endif %}
    </a>
    {% endfor %}
    {% endif %}
{% else %}
<div class="text-center py-12">
    <div class="text-4xl mb-3">üìù</div>
    <div class="text-medium">No notes yet</div>
    <a href="{{ url_for('mobile.note_new') }}" class="btn-primary mt-4 inline-flex">Add Your First Note</a>
</div>
{% endif %}
{% endblock %}
