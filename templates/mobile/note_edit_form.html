{% extends "mobile/base.html" %}

{% block title %}Edit Note - AnchorOS{% endblock %}
{% block page_title %}Edit Note{% endblock %}

{% block content %}
<form method="POST" class="space-y-4">
    <div>
        <label class="block text-sm text-medium mb-2">Title</label>
        <input type="text" name="title" class="input-glass" placeholder="Note title (optional)" value="{{ note.title or '' }}">
    </div>
    
    <div>
        <label class="block text-sm text-medium mb-2">Content</label>
        <textarea name="content" rows="8" class="input-glass" placeholder="Write your note..." autofocus>{{ note.content or '' }}</textarea>
    </div>
    
    <div>
        <label class="block text-sm text-medium mb-2">Tags</label>
        <input type="text" name="tags" id="tags-input" class="input-glass" placeholder="Comma-separated tags (optional)" value="{{ note.tags or '' }}">
        {% if all_tags %}
        <div class="flex flex-wrap gap-2 mt-2">
            {% for tag in all_tags %}
            <button type="button" onclick="addTag('{{ tag }}')" class="pill text-xs bg-white/5 hover:bg-white/10 text-medium border border-white/10">
                + {{ tag }}
            </button>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <script>
    function addTag(tag) {
        const input = document.getElementById('tags-input');
        let current = input.value.trim();
        if (current) {
            const tags = current.split(',').map(t => t.trim());
            if (!tags.includes(tag)) {
                input.value = current + ', ' + tag;
            }
        } else {
            input.value = tag;
        }
    }
    </script>
    
    <button type="submit" class="btn-primary">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        Save Changes
    </button>
    
    <a href="{{ url_for('mobile.note_detail', note_id=note.id) }}" class="btn-secondary">Cancel</a>
</form>
{% endblock %}
